<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Verify Your Email â€” QuizVerse</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
  body {
    background: linear-gradient(120deg,#06081A,#6D28D9 25%,#0F172A 50%,#06B6D4 75%);
    background-size: 300% 300%;
    animation: gradientMove 18s ease infinite;
    font-family: 'Poppins', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    overflow-x: hidden;
    color: white;
  }
  @keyframes gradientMove {
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
  }
  .glass {
    background: rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255,255,255,0.08);
    padding: 2rem;
    border-radius: 1.5rem;
    max-width: 450px;
    text-align: center;
    box-shadow: 0 0 30px rgba(255,255,255,0.1);
  }
  .btn {
    padding: 0.75rem 2rem;
    border-radius: 9999px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 1rem;
    display: inline-block;
  }
  .btn-redirect {
    background: linear-gradient(to right, #FBBF24, #EC4899);
    color: #1E293B;
  }
  .btn-redirect:hover {
    transform: scale(1.05);
  }
  .animate-fade-scale {
    animation: fadeScale 0.8s ease forwards;
  }
  @keyframes fadeScale {
    from { opacity: 0; transform: scale(0.8) translateY(20px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
  }
</style>
</head>
<body>
<div class="glass animate-fade-scale">
  <h1 class="text-3xl font-extrabold mb-4">ðŸ“§ Verify Your Email</h1>
  <p class="text-white/70 mb-6">
    We've sent a confirmation link to your email. <br>
    Please check your inbox and click the link to activate your account.
  </p>
  <div id="status" class="text-sm text-amber-400 mb-4">Waiting for verification...</div>
  <button id="go-dashboard" class="btn btn-redirect hidden">Go to Dashboard</button>
</div>

<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

  const supabaseUrl = 'YOUR_SUPABASE_URL'
  const supabaseKey = 'YOUR_SUPABASE_ANON_KEY'
  const supabase = createClient(supabaseUrl, supabaseKey)

  const statusEl = document.getElementById('status')
  const dashboardBtn = document.getElementById('go-dashboard')

  async function checkVerification() {
    const { data } = await supabase.auth.getUser()
    const user = data?.user
    if (!user) return

    if (user.confirmed_at) {
      statusEl.textContent = 'âœ… Email verified! Redirecting to dashboard...'
      dashboardBtn.classList.remove('hidden')
      setTimeout(() => {
        window.location.href = 'dashboard.html'
      }, 2000)
    } else {
      // poll every 3 seconds
      setTimeout(checkVerification, 3000)
    }
  }

  dashboardBtn.addEventListener('click', () => {
    window.location.href = 'dashboard.html'
  })

  // start polling on load
  window.addEventListener('load', checkVerification)
</script>
</body>
</html>